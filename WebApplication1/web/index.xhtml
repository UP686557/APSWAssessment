<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Flight Booking</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </h:head>
    <h:body>
        <h:form>
            <h1>Passenger Details</h1>
            <h:outputLabel value="Username"/>
            <h:inputText value="#{managedBean.username}"/>
            
            <h:outputLabel value="First Name"/>
            <h:inputText value="#{managedBean.firstName}"/>
            
            <h:outputLabel value="Surname"/>
            <h:inputText value="#{managedBean.lastName}"/>
            
            <h:outputLabel value="First Line of Address"/>
            <h:inputText value="#{managedBean.firstLineAddress}"/>
            
            <h:outputLabel value="Post Code"/>
            <h:inputText value="#{managedBean.postCode}"/>
            
            <h:outputLabel value="Phone Number"/>
            <h:inputText value="#{managedBean.phoneNumber}">
                <!--<f:validateRegex pattern="^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$"/>-->
            </h:inputText>
            
            <h:outputLabel value="Email"/>
            <h:inputText value ="#{managedBean.email}">
                <!--<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />-->
            </h:inputText>
            

                
            <h1>Flight Details</h1>            
            <h:outputLabel value="Flight Number"/>
            <h:inputText value="#{managedBean.flightNo}"/>
            
            <h:outputLabel value="Origin"/>
            <h:inputText value="#{managedBean.origin}"/>
            
            <h:outputLabel value="Destination"/>
            <h:inputText value="#{managedBean.destination}"/>
            
            <h:outputLabel value="Date"/>
            <h:inputText value="#{managedBean.date}"/>
            
            <h:outputLabel value="Time"/>
            <h:inputText value="#{managedBean.time}"/>
           
            
            <h:commandButton action="#{managedBean.go(contactManagerBean.name, contactManagerBean.email, contactManagerBean.phoneNumber)}" value="Go"/>
        </h:form>
        
        <h1>Table</h1>
        <h:dataTable value="#{managedBean.flightNo}" var="flightNo">
            <h:column>
                <f:facet name="header">Flight Number</f:facet>
                #{flightNo.no}
            </h:column>
            <h:column>
                <h:dataTable value="#{managedBean.passenger}" var="passenger">
                    <h:column>
                        <f:facet name="header">First Name</f:facet>
                        #{passenger.firstName}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Surname</f:facet>
                        #{passenger.surname}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Edit</f:facet>
                        <h:form target="_blank">
                            <h:commandButton value="Edit"/>
                        </h:form>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Delete</f:facet>
                        <h:form>
                            <h:commandButton action="#{managedBean.deletePassenger(passenger)}" value="Delete"/>
                        </h:form>
                    </h:column>
                </h:dataTable>
            </h:column>
        </h:dataTable>
    </h:body>
</html>

